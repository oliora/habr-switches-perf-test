# Disclaimer

- The code was made purely for performance testing purpose, use it on your own risk
- Part of the code is only compatible with x86_64 architecture
  and requires CPU with AVX2 support

# Prerequisites

- x86_64 Linux machine with CPU that supports AVX2 (all modern Intel and AMD CPUs have it)
- GCC or Clang (any version that supports C++17 should be fine)
- Meson
- To create graphs: Python 3 with `pandas`, `mathplot` and `jupyterlab` packages

# How to build

To build release version (fully optimized):

    meson setup build
    meson compile -C build

To build debug version (non-optimized):

    meson setup build-debug --buildtype=debug
    meson compile -C build-debug

# How to run tests

To run all the tests:

    ./run-benchmark.sh > result.log

Additionally you can provide a number of runs for each test (10 by default):

    ./run-benchmark.sh 1 > result.log

Tests run for two input files from `inputs` directory: `wp.txt` - War and Peace by Leo Tolstoy
and `long.txt` - a 100x copy of `wp.txt`. `long.txt` is generated by `run-benchmark.sh` script
on its first run.

For more definitive results run tests on an isolated CPU core with using `taskset` or `numactl` command:

    taskset -c <core> ./run-benchmark.sh > result.log

To run particular algo on a particular input file run:

    [taskset -c <core>] build/algo-XXX inputs/wp.txt

# How to run unit tests and micro benchmarks

Build release version first and then run:

    meson test -C build -v
